<!DOCTYPE html>
<html id="J-html" class="iLight">
<head>
    <meta charset="UTF-8" />
    <title>
        
            【PHP】ThinkPHP
        
    </title>
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="dylike" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/static/css/font.css" />
    <link rel="stylesheet" type="text/css" media="all" href="/static/css/style.css" />
    <!--[if lt IE 9]>
    <script src="/static/js/html5.js" type="text/javascript"></script>
    <![endif]-->
    <script src="/static/js/jquery.js" type="text/javascript"></script>
</head>
<body itemscope itemtype="http://schema.org/WebPage" class="home blog lotus index">
    <nav class="lotus-nav">
        <ul>
            
            
            
            
            
            <li class="home " id="">
                <a href="/" rel="bookmark" title="首页">
                    <i class="icon-home"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="" id="">
                <a href="/archives.html" rel="bookmark" title="文章归档">
                    <i class="icon-reorder"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="" id="">
                <a href="/contact.html" rel="bookmark" title="关于我">
                    <i class="icon-envelope-alt"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="" id="">
                <a href="/links.html" rel="bookmark" title="友情链接">
                    <i class="icon-link"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="" id="J-changeTheme">
                <a href="#" rel="bookmark" title="切换模式">
                    <i class=""></i>
                </a>
                
            </li>
            
        </ul>
    </nav>

    <p class="lotus-breadcrub">
    <a href="/index.html" rel="nofollow" rel="nofollow" title="首页">Home</a>
    <span> &gt; </span>
    <a href="/archives.html" rel="nofollow" >Archives</a>
    <span> &gt; </span>
    【PHP】ThinkPHP
</p>
<h1 class="lotus-pagetit">【PHP】ThinkPHP</h1>
<p class="lotus-meta">Publish: <time class="date" pubdate="November  4, 2014">November  4, 2014</time></p>
<article  itemscope itemtype="http://schema.org/Article" class="lotus-post">
<p><span style="font-size:32px">由于</span>项目需求，需要快速上手PHP的国产框架——ThinkPHP.</p>

<p>略微介绍一下，ThinkPHP由上海顶想信息科技有限公司（TOPThink Inc.）创始人刘晨于2006年创立，上海顶想信息科技有限公司（TOPThink Inc.）是国内领先的WEB应用和服务提供商致力于WEB应用平台、产品和应用的研发和服务，为企事业单位提供基于WEB的应用开发快速解决方案和产品。</p>

<p>ThinkPHP的使用案例是非常多的，作为一款国产开源框架，有相对繁荣的社区我觉得应该赞一个，当然框架的优劣质量又是一说。</p>

<p>从我学习框架的感受来说，文档还不错（中文文档好舒服）</p>

<p>社区也一直有人支持维护，问题能够及时得到反馈。</p>

<h2 id="section">传送门</h2>
<ol>
  <li><a href="http://www.thinkphp.cn/" target="_blank">Thinkphp 官方网站</a></li>
  <li><a href="http://doc.thinkphp.cn/manual.html" target="_blank">Thinkphp 3.1 文档</a></li>
  <li><a href="http://document.thinkphp.cn/manual_3_2.html" target="_blank">Thinkphp 3.2 文档</a></li>
</ol>

<h2 id="section-1">系统概览</h2>

<p>相对来说比较传统的一个框架,在学习过程中我觉得有这么几个点值得一记：</p>

<ol>
  <li>MVC</li>
  <li>模块化</li>
  <li>行为模式（面向切面编程AOP）</li>
</ol>

<h3 id="section-2">1. 入口文件定义(采用单入口文件的方式)</h3>

<pre><code>www  WEB部署目录（或者子目录）
├─index.php       入口文件
├─README.md       README文件
├─Application     应用目录
├─Public          资源文件目录
└─ThinkPHP        框架目录

//为项目的入口文件.(默认)
index.php
</code></pre>

<blockquote>
  <h4 id="section-3">入口文件主要完成：</h4>
  <ul>
    <li>定义框架路径、项目路径（可选）</li>
    <li>定义调试模式和应用模式（可选）</li>
    <li>定义系统相关常量（可选）</li>
    <li>载入框架入口文件（必须）</li>
  </ul>
</blockquote>

<pre><code>默认情况：
//APP_PATH的定义支持相对路径和绝对路径，但必须以“/”结束
//所有路径常量都必须以“/”结尾
define('APP_PATH','./Application/');
require './ThinkPHP/ThinkPHP.php';  注意：在开发过程一定要定义：

// 开启调试模式 建议开发阶段开启 部署阶段注释或者设为false
define('APP_DEBUG',True);
</code></pre>

<h3 id="section-4">2. 模块</h3>
<p>　采用模块化的设计架构，每个模块可以方便的卸载和部署，并且支持公共模块(Common).</p>

<pre><code>Application      默认应用目录（可以设置）
├─Common         公共模块（不能直接访问）
├─Home           前台模块
├─Admin          后台模块
├─...            其他更多模块
├─Runtime        默认运行时目录（可以设置）
</code></pre>

<p>　每个模块相对来说是独立的，目录的结构如下：
　<strong>注意</strong>：除了 <strong><em>Conf和Common目录</em></strong> 外，每个模块下面的目录结构可以根据需要灵活设置和添加，</p>

<pre><code>├─Module         模块目录(如Admin)
│  ├─Conf        配置文件目录
│  ├─Common      公共函数目录
│  ├─Controller  控制器目录(C)
│  ├─Model       模型目录(M)
│  ├─Logic       逻辑目录（可选）
│  ├─Service     Service目录（可选）
│  ... 更多分层目录可选
│  └─View        视图目录(V)
</code></pre>

<p>　举例：</p>

<pre><code>//URL访问
http://serverName/index.php（或者其他应用入口文件）/模块/控制器/操作/[参数名/参数值...]
</code></pre>

<p>以上是 MVC 与 模块化 的体现</p>

<blockquote>
  <h4 id="section-5">名词解释:</h4>

  <table>
    <thead>
      <tr>
        <th>名称</th>
        <th>描述</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>应用</td>
        <td>基于同一个入口文件访问的项目我们称之为一个应用</td>
      </tr>
      <tr>
        <td>模块</td>
        <td>一个应用下面可以包含多个模块，每个模块在应用目录下面都是一个独立的目录</td>
      </tr>
      <tr>
        <td>控制器</td>
        <td>每个模块的可以包含多个控制器，一个控制器通常体现为一个控制器类</td>
      </tr>
      <tr>
        <td>操作</td>
        <td>每个控制器类可以包含多个操作方法，也可能是绑定的某个操作类，每个操作是URL访问的最小单元</td>
      </tr>
    </tbody>
  </table>
</blockquote>

<h3 id="thinkphp">3. ThinkPHP行为模式和面向切面编程</h3>

<p>面向切面编程，AOP主要实现的目的是针对业务处理过程中的切面进行提取，它所面对的是处理过程中的某个步骤或阶段，以获得逻辑过程中各部分之间低耦合性的隔离效果。</p>

<p>比如说我需要在新增一条数据的同时，触发一下发送邮件的功能，在修改、更新、删除的时候都需要，那么是否说发送邮件这一功能是在进行某些行为的时候就需要被触发的？例子中的增删改就是这样的行为，而面向切面编程，就是把发送邮件这一业务隔离出来，使得发送邮件的代码块可以复用。</p>

<p>ThinkPHP中提供了一类扩展，<a href="http://www.thinkphp.cn/info/249.html" target="_blank">行为（Behavior）</a>,</p>

<p>按行为(Behavior)的定义即是，网页的加载渲染过程中会有一段顺序的执行流程，这个流程可以参考ThinkPHP的项目<a href="http://document.thinkphp.cn/manual_3_2.html#system_process" target="_blank">启动流程</a>！</p>

<table>
  <thead>
    <tr>
      <th>行为</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1. 用户URL请求</td>
    </tr>
    <tr>
      <td>2. 调用应用入口文件（通常是网站的index.php）</td>
    </tr>
    <tr>
      <td>3. 载入框架入口文件（ThinkPHP.php）</td>
    </tr>
    <tr>
      <td>4. 记录初始运行时间和内存开销</td>
    </tr>
    <tr>
      <td>…</td>
    </tr>
    <tr>
      <td>63.视图结束（view_end）标签位侦听并执行绑定行为</td>
    </tr>
    <tr>
      <td>64.判断后置操作方法是否定义，有的话执行</td>
    </tr>
    <tr>
      <td>65.控制器结束（action_end）标签位侦听并执行绑定行为</td>
    </tr>
    <tr>
      <td>66.应用结束（app_end）标签位侦听并执行绑定行为</td>
    </tr>
    <tr>
      <td>67.执行系统的ShowPageTrace行为（SHOW_PAGE_TRACE参数开启并且不是AJAX请求）</td>
    </tr>
    <tr>
      <td>68.日志信息存储写入</td>
    </tr>
  </tbody>
</table>

<p>想象在应用执行过程中,如框架的执行流程中，各个位置都可以有行为产生，例如路由检测是一个行为，静态缓存是一个行为，用户权限检测也是行为，大到业务逻辑，小到浏览器检测、多语言检测等等都可以当做是一个行为，甚至说你希望给你的网站用户的第一次访问弹出Hello，world！这些都可以看成是一种行为.</p>

<p>行为的存在让你无需改动框架和应用，而在外围通过扩展或者配置来改变或者增加一些功能。</p>

<p>而不同的行为之间也具有位置共同性，比如，有些行为的作用位置都是在应用执行前，有些行为都是在模板输出之后，我们把这些行为发生作用的位置称之为标签（位），当应用程序运行到这个标签的时候，就会被拦截下来，统一执行相关的行为，类似于AOP编程中的“切面”的概念，给某一个切面绑定相关行为就成了一种类AOP编程的思想。</p>

<h2 id="section-6">总结:</h2>
<p>以上为个人在学习ThinkPHP的过程中觉得比较有意思的地方，留作笔记。</p>


</article>
<p class="lotus-anno">声明: 本文采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="nofollow" target="_blank" title="自由转载-非商用-非衍生-保持署名">BY-NC-SA(自由转载-非商用-非衍生-保持署名)</a> 授权。转载请注明转自: <a href="" title="" rel="nofollow">dylike</a></p>
<section class="lotus-nextpage fn-clear">
    
    <div class="lotus-nextpage-left"><a class="prev" href="/security,/web/2014/11/04/security.html" rel="prev">&laquo;&nbsp;【Web】Web常见安全问题</a></div>
    
    
    <div class="lotus-nextpage-right"><a class="next" href="/http%20cors%20html5/2015/03/01/cors%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82.html" rel="next">【整理】CORS跨域访问&nbsp;&raquo;</a></div>
    
</section>


<!-- 多说评论框 start -->
<div class="ds-thread" data-thread-key="/thinkphp/2014/11/04/thinkphp.html" data-title="【PHP】ThinkPHP" data-url="/thinkphp/2014/11/04/thinkphp.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    var duoshuoQuery = {short_name:"dylike"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- 多说公共JS代码 end -->



<footer class="lotus-footer" style="text-align:center;">
	<p>Copyright © 2014-2015 <b>dylike的小站</b> All rights reserved. Theme by <a href="http://www.zhanxin.info" target="_blank">zhanxin</a>.</p>
</footer>
<script src="/static/js/jquery.scrollTo.js" type="text/javascript"></script>
<script src="/static/js/iLotus.js" type="text/javascript"></script>
    <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan style='display:none' id='cnzz_stat_icon_1256703495'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1256703495' type='text/javascript'%3E%3C/script%3E"));</script>
</body>
</html>
